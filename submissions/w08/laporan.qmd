---
title: "Laporan Minggu 08"
subtitle: "Ringkasan Eksekusi & Inspeksi Kode"
---

::: {.callout-tip title="Tujuan Laporan Ini"}
Laporan ini di-*generate* secara otomatis untuk menampilkan hasil eksekusi kodemu dari `submissions/w08/answers.py` dalam format yang **rapi, terstruktur, dan nyaman dibaca**.

‚úÖ **Sumber Kebenaran Tunggal:** Sistem *autograder* tetap akan menilai langsung dari file `.py` milikmu, laporan ini murni hanya sebagai *dashboard* visualisasi.
:::

::: {.callout-important title="Catatan Penting Penilaian"}
Laporan ini **bukan** penilaian! Penilaian resmi tetap dari *autograder* (`pytest`). Untuk melakukan simulasi penilaian di komputermu, jalankan perintah ini di terminal:

```bash
pytest -q checkers/w08/quiz_tests.py
```

atau dengan perintah:

```bash
make test WEEK=w08
```
:::

::: {.callout-note collapse="true" title="Cara Render Manual di Lokal (Klik untuk membuka)"}
Jika kamu melakukan perubahan pada kodemu dan ingin melihat hasilnya tanpa harus melakukan `git push`, jalankan perintah ini di terminal:

```bash
quarto render submissions/w08/laporan.qmd
```
:::

---

## üìä Ringkasan Eksekusi

::: {.callout-warning appearance="simple"}
Tabel di bawah ini memotong (*truncate*) tampilan *array/list* yang terlalu panjang agar format tabel tidak rusak. Untuk melihat hasil jawaban penuh, silakan cek bagian **Inspeksi Detail** di bawah.
:::

```{python}
import sys
import math
import reprlib
import numpy as np
import pandas as pd
from pathlib import Path

cwd = Path.cwd().resolve()
repo_root = cwd if (cwd / "submissions").exists() else cwd.parents[1]
if str(repo_root) not in sys.path:
    sys.path.insert(0, str(repo_root))

from submissions.w08 import answers as A

def _is_number(x):
    return isinstance(x, (int, float, np.number)) and not isinstance(x, bool)

def _in_0_1(x):
    return _is_number(x) and not math.isnan(x) and (0.0 <= float(x) <= 1.0)

prob_tasks = {"q09", "q10", "q11"}
count_tasks = {"q08"}
var_tasks = {"q12"}
corr_tasks = set()
bool_num_tasks = set()

rows, details = [], []
previewer = reprlib.Repr()
previewer.maxlist = previewer.maxarray = previewer.maxtuple = 5
previewer.maxstring = 60

for i in range(1, 13):
    name = f"q{i:02d}"
    func = getattr(A, name, None)
    status, err, val = "OK", "", None
    notes = []

    if func is None:
        status, err = "MISSING", "Fungsi tidak ditemukan"
    else:
        try:
            val = func()
        except NotImplementedError:
            status, err = "TODO", "Belum dikerjakan"
        except Exception as e:
            status, err = "ERR", f"{type(e).__name__}: {e}"

    if status == "OK":
        if name in prob_tasks and not _in_0_1(val):
            notes.append("‚ö†Ô∏è Bukan probabilitas (0..1)")
        if name in count_tasks and not isinstance(val, (int, np.integer)):
            notes.append("‚ö†Ô∏è Bukan bilangan bulat")
        if name in var_tasks and _is_number(val) and float(val) < 0:
            notes.append("‚ö†Ô∏è Nilai tidak boleh negatif")
        if name in corr_tasks and _is_number(val) and not (-1.0 <= float(val) <= 1.0):
            notes.append("‚ö†Ô∏è Korelasi harus rentang -1.0 .. 1.0")
        if name in bool_num_tasks and val not in (0, 1):
            notes.append("‚ö†Ô∏è Jawaban harus angka 0 atau 1")

        if isinstance(val, float) and (math.isnan(val) or math.isinf(val)):
            notes.append("‚ö†Ô∏è Terdapat NaN/Inf")

    if status in ("ERR", "MISSING"):
        notes.append("‚ùå Perlu diperbaiki")
    elif status == "TODO":
        notes.append("üìù Menunggu implementasi")
    elif not notes:
        notes.append("‚úÖ Aman")

    rows.append(
        {
            "Soal": name.upper(),
            "Status": status,
            "Preview Output": previewer.repr(val) if val is not None else "-",
            "Catatan Sistem": " | ".join(notes),
        }
    )
    details.append((name, status, val, err))

df = pd.DataFrame(rows)
df.style.hide(axis="index")
```

---

## üîç Inspeksi Detail per Soal

```{python}
#| output: asis

def _md_escape(s: str) -> str:
    return s.replace("`", "\\`")

for name, status, val, err in details:
    if status == "OK":
        icon = "üü¢"
    elif status == "TODO":
        icon = "üü°"
    else:
        icon = "üî¥"

    print(f"### {icon} Task {name.upper()} \n")
    
    if status == "OK":
        print("```python")
        print(repr(val)) 
        print("```\n")
    elif status == "TODO":
        print(f"> ‚è≥ *Fungsi ini belum diimplementasikan.* \n\n")
    else:
        print(f"::: {{.callout-important title='Terjadi Error'}}\n`{_md_escape(err)}`\n:::\n\n")
```
